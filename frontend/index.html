<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenCV Image Processing Studio - Multi-Image</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div>
                        <h1>OpenCV Studio</h1>
                        <p>Multi-Image Processing</p>
                    </div>
                </div>
            </div>
            
            <div class="operations-section">
                <!-- Getting Started -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">🚀</span>
                        Getting Started
                    </div>
                    <button class="operation-btn" data-operation="dimensions">
                        <span class="btn-icon">📏</span>
                        Show Dimensions
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Grayscaling -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">⚫</span>
                        Grayscaling
                    </div>
                    <button class="operation-btn" data-operation="grayscale">
                        <span class="btn-icon">🎨</span>
                        Convert to Grayscale
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="compare-dimensions">
                        <span class="btn-icon">📊</span>
                        Compare Dimensions
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Color Spaces -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">🌈</span>
                        Color Spaces
                    </div>
                    <button class="operation-btn" data-operation="rgb-channels">
                        <span class="btn-icon">🔴</span>
                        RGB Channels
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="hsv-convert">
                        <span class="btn-icon">🎯</span>
                        HSV Conversion
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="color-manipulation">
                        <span class="btn-icon">🎪</span>
                        Color Manipulation
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Drawing & Shapes -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">✏️</span>
                        Drawing & Shapes
                    </div>
                    <button class="operation-btn" data-operation="draw-shapes">
                        <span class="btn-icon">🔷</span>
                        Draw Shapes
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="add-text">
                        <span class="btn-icon">📝</span>
                        Add Text
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Transformations -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">🔄</span>
                        Transformations
                    </div>
                    <button class="operation-btn" data-operation="translate">
                        <span class="btn-icon">📐</span>
                        Translation
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="rotate">
                        <span class="btn-icon">🔄</span>
                        Rotation
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="flip">
                        <span class="btn-icon">🔀</span>
                        Flip Image
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Scaling & Resizing -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">📏</span>
                        Scaling & Resizing
                    </div>
                    <button class="operation-btn" data-operation="resize">
                        <span class="btn-icon">🔍</span>
                        Resize Image
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="pyramid">
                        <span class="btn-icon">🏔️</span>
                        Image Pyramid
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="crop">
                        <span class="btn-icon">✂️</span>
                        Crop Image
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Arithmetic & Bitwise -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">🧮</span>
                        Arithmetic & Bitwise
                    </div>
                    <button class="operation-btn" data-operation="arithmetic">
                        <span class="btn-icon">➕</span>
                        Arithmetic Ops
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="bitwise">
                        <span class="btn-icon">⚡</span>
                        Bitwise Ops
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Filtering -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">✨</span>
                        Filtering & Enhancement
                    </div>
                    <button class="operation-btn" data-operation="blur">
                        <span class="btn-icon">🌀</span>
                        Blur Effects
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="sharpen">
                        <span class="btn-icon">🔪</span>
                        Sharpen Image
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="denoise">
                        <span class="btn-icon">🧹</span>
                        Denoise
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Thresholding -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">⚖️</span>
                        Thresholding
                    </div>
                    <button class="operation-btn" data-operation="threshold">
                        <span class="btn-icon">⚫</span>
                        Binary Threshold
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="adaptive-threshold">
                        <span class="btn-icon">🎛️</span>
                        Adaptive Threshold
                        <span class="btn-arrow">→</span>
                    </button>
                </div>

                <!-- Morphology & Edge Detection -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon">🔍</span>
                        Morphology & Edges
                    </div>
                    <button class="operation-btn" data-operation="dilation">
                        <span class="btn-icon">📈</span>
                        Dilation
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="erosion">
                        <span class="btn-icon">📉</span>
                        Erosion
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="opening">
                        <span class="btn-icon">🌅</span>
                        Opening
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="closing">
                        <span class="btn-icon">🌄</span>
                        Closing
                        <span class="btn-arrow">→</span>
                    </button>
                    <button class="operation-btn" data-operation="edge-detection">
                        <span class="btn-icon">🔍</span>
                        Canny Edge Detection
                        <span class="btn-arrow">→</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <div class="breadcrumb">
                        <span class="breadcrumb-item">Dashboard</span>
                        <span class="breadcrumb-separator">›</span>
                        <span class="breadcrumb-item active">Multi-Image Processing</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="status-indicator">
                        <div class="status-dot online"></div>
                        <span id="backendStatus">Connected</span>
                    </div>
                </div>
            </div>

            <!-- Toolbar -->
            <div class="toolbar">
                <div class="toolbar-left">
                    <div class="file-input-wrapper">
                        <input type="file" id="imageInput" class="file-input" accept="image/*" multiple>
                        <button class="btn btn-primary" onclick="document.getElementById('imageInput').click()">
                            <span class="btn-icon">📁</span>
                            Load Images
                        </button>
                    </div>
                    <button class="btn btn-secondary" onclick="clearAllImages()">
                        <span class="btn-icon">🗑️</span>
                        Clear All
                    </button>
                    <button class="btn btn-accent" id="processAllBtn" onclick="processAllImages()" disabled>
                        <span class="btn-icon">⚡</span>
                        Process All
                    </button>
                </div>
                <div class="toolbar-right">
                    <div class="view-toggle">
                        <button class="btn btn-outline view-btn active" data-view="grid" onclick="toggleView('grid')">
                            <span class="btn-icon">⊞</span>
                            Grid View
                        </button>
                        <button class="btn btn-outline view-btn" data-view="comparison" onclick="toggleView('comparison')">
                            <span class="btn-icon">⊟</span>
                            Compare View
                        </button>
                    </div>
                    <div class="export-dropdown">
                        <button class="btn btn-success" onclick="toggleExportDropdown()">
                            <span class="btn-icon">💾</span>
                            Export Results
                            <span class="dropdown-arrow">▼</span>
                        </button>
                        <div class="export-dropdown-menu" id="exportDropdown">
                            <button class="export-option" onclick="exportAs('png')">
                                <span class="export-icon">🖼️</span>
                                PNG Images
                            </button>
                            <button class="export-option" onclick="exportAs('jpg')">
                                <span class="export-icon">📸</span>
                                JPG Images
                            </button>
                            <button class="export-option" onclick="exportAsPDF()">
                                <span class="export-icon">📄</span>
                                PDF Report
                            </button>
                            <button class="export-option" onclick="exportAll()">
                                <span class="export-icon">📦</span>
                                Export All
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Multi-Image Workspace -->
            <div class="workspace">
                <!-- Image Gallery Container -->
                <div class="image-gallery" id="imageGallery">
                    <div class="gallery-placeholder">
                        <div class="placeholder-icon">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21,15 16,10 5,21"/>
                            </svg>
                        </div>
                        <h3>Load multiple images to get started</h3>
                        <p>Select multiple images to process them simultaneously</p>
                        <p class="format-info">Supports JPG, PNG, BMP, TIFF formats</p>
                        <button class="btn btn-primary" onclick="document.getElementById('imageInput').click()">
                            <span class="btn-icon">📁</span>
                            Choose Multiple Images
                        </button>
                    </div>
                </div>

                <!-- Dynamic Controls Panel -->
                <div class="controls-panel" id="controlsPanel">
                    <div class="controls-header">
                        <h4>Processing Controls</h4>
                        <div class="controls-actions">
                            <span class="selected-count" id="selectedCount">0 images selected</span>
                            <button class="icon-btn" onclick="closeControls()">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="controls-content" id="controlsContent">
                        <!-- Dynamic controls will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-left">
            <span id="statusText">Ready for multi-image processing</span>
        </div>
        <div class="status-center">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">0%</span>
            </div>
        </div>
        <div class="status-right">
            <span id="imageCount">No images loaded</span>
        </div>
    </div>

    <!-- PDF Report Modal -->
    <div class="modal-overlay" id="pdfModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Generate Multi-Image PDF Report</h2>
                <button class="icon-btn" onclick="closePDFModal()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            
            <div class="modal-body">
                <p class="modal-description">Configure your multi-image PDF report settings</p>
                
                <div class="control-group">
                    <label>Report Title</label>
                    <input type="text" id="pdfTitle" value="Multi-Image Processing Report" class="control-input">
                </div>
                
                <div class="control-group">
                    <label>Include Original Images</label>
                    <input type="checkbox" id="includeOriginal" checked>
                </div>
                
                <div class="control-group">
                    <label>Include Processed Images</label>
                    <input type="checkbox" id="includeProcessed" checked>
                </div>
                
                <div class="control-group">
                    <label>Include Processing Details</label>
                    <input type="checkbox" id="includeDetails" checked>
                </div>
                
                <div class="control-group">
                    <label>Include Metadata</label>
                    <input type="checkbox" id="includeMetadata" checked>
                </div>
                
                <div class="control-group">
                    <label>Images per Page</label>
                    <select id="imagesPerPage" class="control-input">
                        <option value="1">1 image per page</option>
                        <option value="2" selected>2 images per page</option>
                        <option value="4">4 images per page</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>Additional Notes</label>
                    <textarea id="pdfNotes" placeholder="Add any additional notes..." rows="3" class="control-input"></textarea>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closePDFModal()">Cancel</button>
                <button class="btn btn-primary" onclick="generateMultiImagePDFReport()">Generate PDF</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>